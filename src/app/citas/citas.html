<div class="citas-container">
  <h1>Agendar Cita</h1>

  <!-- Formulario solo visible para admin -->
  <div *ngIf="esAdmin(); else soloVisualizacion">
    <form [formGroup]="citaForm" (ngSubmit)="agendarCita()">
      <div class="form-group">
        <label>Selecciona Mascota:</label>
        <select formControlName="mascotaId" required>
          <option value="" disabled>-- Selecciona --</option>
          <option *ngFor="let mascota of mascotas" [value]="mascota.id">
            {{ mascota.nombre }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Fecha:</label>
        <input type="date" formControlName="fecha" required />
      </div>

      <div class="form-group">
        <label>Hora:</label>
        <input type="time" formControlName="hora" required />
      </div>

      <button type="submit" [disabled]="citaForm.invalid">Agendar Cita</button>
    </form>
  </div>

  <ng-template #soloVisualizacion>
    <p>Modo Cliente: Solo puedes visualizar las citas agendadas.</p>
  </ng-template>

  <hr>

  <h2>Citas Agendadas</h2>
  <ul>
    <li *ngFor="let cita of citas">
      <strong>{{ getMascotaNombre(cita.mascotaId) }}</strong>
      - {{ cita.fecha }} a las {{ cita.hora }}
      <!-- Solo admin puede eliminar -->
      <button *ngIf="esAdmin()" (click)="eliminarCita(cita.id)">Eliminar</button>
    </li>
  </ul>
</div>
